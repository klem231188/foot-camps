<div *ngIf="user" class="role">
  {{user.role}}
</div>
<div *ngIf="sessions" class="sessions">
  <mat-accordion>
    <mat-expansion-panel *ngFor="let session of sessions; let i = index" [expanded]="session == selectedSession"
                         (opened)="updateSelectedSession(session)">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Session n°{{i}}
        </mat-panel-title>
        <mat-panel-description>
          du {{session.start | date : 'shortDate'}} au {{session.end | date : 'shortDate'}}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p>Nombre de place disponibles: {{session.maximumNumberOfRegistrations}}</p>
      <p>Nombre de pré-inscriptions: {{session.numberOfRegistrationsInProgress}}</p>
      <p>Nombre d'inscriptions acceptées: {{session.numberOfRegistrationsAccepted}}</p>
      <p>Nombre d'inscriptions refusées: {{session.numberOfRegistrationsRejected}}</p>
      <p *ngIf="session.halfBoardRates">Tarifs demi pension: {{session.halfBoardRates}} €</p>
      <p *ngIf="session.fullBoardRates">Tarifs pension complète: {{session.fullBoardRates}} €</p>
    </mat-expansion-panel>
  </mat-accordion>

  <br>
  <button mat-raised-button (click)="print()" color="primary">Imprimer</button>
</div>
<div *ngIf="registrations" class="registrations" #elementRegistrations>
  <mat-card *ngFor="let registration of registrations; let i = index">
    <mat-card-header>
      <!-- TODO picture -->
      <img matCardAvatar
           src="https://lh3.googleusercontent.com/-XlV8qhXgMbs/AAAAAAAAAAI/AAAAAAAAABI/fsluBBoN5gY/photo.jpg">
      <mat-card-title>{{registration.firstname}} {{registration.lastname}}</mat-card-title>
      <mat-card-subtitle>{{registration.birthdate | age}} ans</mat-card-subtitle>
    </mat-card-header>

    <mat-divider></mat-divider>
    <mat-card-content>
      <br>
      Etat inscription: <span [ngClass]="{'primary': registration.state === 'ACCEPTED',
                                          'accent': registration.state === 'IN_PROGRESS',
                                          'warn': registration.state === 'REJECTED'
                                          }">
                          <b>{{registration.state | state}}</b>
                        </span><br>

      <h2>Caractéristiques générales </h2>
      Nom: {{registration.firstname}} <br>
      Prénom: {{registration.lastname}} <br>
      Sexe: {{registration.gender | gender}} <br>
      Email: {{registration.email}} <br>
      Age: {{registration.birthdate | age}} ans <br>

      <h2>Caractéristiques sportives</h2>
      Club: {{registration.club}}<br>
      Poste: {{registration.fieldPosition | fieldPosition}}<br>
      Pied: {{registration.feet | feet}}<br>

    </mat-card-content>
    <mat-card-actions align="center" *ngIf="registration.state === 'IN_PROGRESS'">
      <button mat-button (click)="accept(registration)" color="primary">Accepter inscription</button>
      <button mat-button (click)="reject(registration)" color="warn">Refuser inscription</button>
    </mat-card-actions>
    <div class="html2pdf__page-break" *ngIf="i !== (registrations.length - 1)"></div>
  </mat-card>
</div>
