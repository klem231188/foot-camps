<div *ngIf="!footballCamp" class="main-container">
  Loading...
</div>
<div *ngIf="footballCamp" class="main-container">

  <!-- Absolute positioned FAB button to register -->
  <button class="fab-button-registration" mat-fab color="accent" [routerLink]="[ '/registration/', footballCamp.id ]">
    <mat-icon class="mat-24">create</mat-icon>
  </button>

  <!-- menu on the left -->
  <div class="menu-container">
    <span class="separator"></span>
    <span class="separator"></span>
      <mat-nav-list>
        <a mat-list-item (click)="scrollTo('description')" class="menu activated" id="description-menu">Description</a>
        <a mat-list-item (click)="scrollTo('location')" class="menu" id="location-menu">Localisation</a>
        <mat-list-item (click)="scrollTo('organizers')" class="menu" id="organizers-menu">Les organisateurs et les parrains</mat-list-item>
        <mat-list-item (click)="scrollTo('gallery-photo')" class="menu" id="gallery-photo-menu">Gallerie Photo</mat-list-item>
        <mat-list-item (click)="scrollTo('date')" class="menu" id="date-menu">Dates et Tarifs</mat-list-item>
        <mat-list-item (click)="scrollTo('registration')" class="menu" id="registration-menu">Inscriptions</mat-list-item>
      </mat-nav-list>
  </div>
  <!--</div>-->
  <div class="vertical-line"></div>

  <!-- content on the right -->
  <div class="content-container" #contentContainer>
    <span class="separator"></span>
    <span class="separator"></span>

    <!-- Description -->
    <div class="container scrollable" id="description">
      <mat-toolbar>
        <mat-icon class="mat-24">description</mat-icon>
        <span fxFlex="10px"></span>
        <span>Description</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <p [innerHTML]="footballCamp.details.description | safeHtml"></p>
          <b>Programme:</b>
          <span fxFlex="2px"></span>
          <a href="{{footballCamp.details.pathToSchedule}}" download mat-button color="primary">Télécharger le
            programme
            de la semaine</a>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Location -->
    <div class="container scrollable" id="location">
      <mat-toolbar>
        <mat-icon class="mat-24">location_on</mat-icon>
        <span fxFlex="10px"></span>
        <span>Localisation</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <p [innerHTML]="footballCamp.details.location | safeHtml"></p>
          <div fxLayout="row" fxLayoutAlign="start center" class="details-location-address">
            <b>Adresse: </b>
            <span fxFlex="2px"></span>
            <a [href]="footballCamp.details.gmapsUrl" mat-button
               color="primary">{{footballCamp.details.address}}</a>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!--Organizers -->
    <div class="container scrollable" id="organizers">
      <mat-toolbar>
        <mat-icon class="mat-24">face</mat-icon>
        <span fxFlex="10px"></span>
        <span>Les organisateurs et les parrains</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <p [innerHTML]="footballCamp.details.organizerDescription | safeHtml"></p>
          <div *ngIf="footballCamp.details.organizers != null">
            <div class="quote" *ngFor="let organizer of footballCamp.details.organizers">
              <img class="avatar" src="{{organizer.pathToPicture}}">
              <blockquote>
                <div [innerHTML]="organizer.quote | safeHtml"></div>
                <cite>{{organizer.firstname}} {{organizer.lastname}}</cite>
              </blockquote>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Photo gallery -->
    <div class="container scrollable" id="gallery-photo">
      <mat-toolbar>
        <mat-icon class="mat-24">photo</mat-icon>
        <span fxFlex="10px"></span>
        <span>La galerie photo</span>
      </mat-toolbar>
      <!--<span fxFlex="3px" class="background-white"></span>-->
      <mat-card [ngClass]="isViewerOpened() ? 'z-index11' : 'z-index2'">
        <mat-card-content>
          <gallery [flexBorderSize]="3" [flexImageSize]="7" [metadataUri]="footballCamp.details.pathToGallery"
                   (viewerChange)="onViewerChange($event)">
          </gallery>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Dates and prices -->
    <div class="container scrollable" id="date">
      <mat-toolbar>
        <mat-icon class="mat-24">date_range</mat-icon>
        <span fxFlex="10px"></span>
        <span>Les dates et tarifs</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <table>
            <thead>
            <tr>
              <th scope="col">Sessions</th>
              <th scope="col">Dates</th>
              <th scope="col" *ngIf="hasFullBoardRatesSessions()">Tarifs en Pension complète</th>
              <th scope="col" *ngIf="hasHalfBoardRatesSessions()">Tarifs en Demi-pension</th>
              <th scope="col">Inscriptions</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let session of sessions; let i = index">
              <td data-label="Sessions">Session n°{{i}}</td>
              <td data-label="Dates">A partir du {{session.start.toDate() | date : 'longDate'}} jusqu'au
                {{session.end.toDate() | date :
                'longDate'}}
              </td>
              <td data-label="Tarifs en Pension complète" *ngIf="hasFullBoardRatesSessions()">
                {{session.fullBoardRates}}
                €
              </td>
              <td data-label="Tarifs en Demi-pension" *ngIf="hasHalfBoardRatesSessions()">{{session.halfBoardRates}} €
              </td>
              <td data-label="Inscriptions">
                <!--<mat-progress-spinner [value]="percentageOfRegistrations(session)"></mat-progress-spinner>-->
                <mat-progress-bar mode="determinate" [value]="percentageOfRegistrations(session)"
                                  color="primary"></mat-progress-bar>
                {{(session.numberOfRegistrationsInProgress +
                session.numberOfRegistrationsAccepted)}}/{{session.maximumNumberOfRegistrations}}
              </td>
            </tr>
            </tbody>
          </table>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Registration link -->
    <div class="container scrollable" id="registration">
      <mat-toolbar>
        <mat-icon class="mat-24">create</mat-icon>
        <span fxFlex="10px"></span>
        <span>Les inscriptions</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <div
            *ngIf="footballCamp.details.useOnlineRegistration; then redirectToRegistrationPage; else redirectToWebsite">
          </div>

          <ng-template #redirectToRegistrationPage>
            Les inscriptions se font sur FootCamps !
            <br>
            <br>
            <div fxLayout="column" fxLayoutAlign="none center">
              <a [routerLink]="[ '/registration/', footballCamp.id ]" mat-button color="primary"
                 class="link-to-maps">Je
                m'inscris sans attendre !</a>
            </div>
          </ng-template>

          <ng-template #redirectToWebsite>
            Pour le moment les inscriptions sont uniquement possibles via le site de l'organisateur.
            <br>
            <br>
            <div fxLayout="column" fxLayoutAlign="none center">
              <a [href]="footballCamp.details.registrationUrl" mat-button color="primary" class="link-to-maps">Je
                m'inscris sans attendre !</a>
            </div>
          </ng-template>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>
    <span class="separator"></span>
  </div>
</div>
