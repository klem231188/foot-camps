<div *ngIf="footballCamp" class="main-container">

  <button class="fab-button-registration" mat-fab color="accent" [routerLink]="[ '/registration/', footballCamp.id ]"><mat-icon class="mat-24">create</mat-icon></button>

  <div class="logo-container">
    <img [src]="footballCamp.details.pathToLogo" class="details-logo">
    <img src="./assets/img/soccer-sketch.png" class="soccer-ball">
  </div>

  <hr class="vertical-line">

  <div *ngIf="footballCamp" class="details-container">
    <span class="separator"></span>
    <span class="separator"></span>

    <!-- Description -->
    <div class="container">
      <mat-toolbar>
        <mat-icon color="primary" class="mat-24">description</mat-icon>
        <span fxFlex="10px"></span>
        <span class="toolbar-title">Description</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <p [innerHTML]="footballCamp.details.description | safeHtml"></p>
          <b>Programme:</b>
          <a href="{{footballCamp.details.pathToSchedule}}" download mat-button color="primary">Télécharger le programme
            de la semaine</a>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Localisation -->
    <div class="container">
      <mat-toolbar>
        <mat-icon color="primary" class="mat-24">location_on</mat-icon>
        <span fxFlex="10px"></span>
        <span class="toolbar-title">Localisation</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <p [innerHTML]="footballCamp.details.location | safeHtml"></p>
          <div fxLayout="row" fxLayoutAlign="start center" class="details-location-address">
            <b>Adresse: </b>
            <span fxFlex="10px"></span>
            <a [href]="footballCamp.details.gmapsUrl" mat-button color="primary">{{footballCamp.details.address}}</a>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Les organisateurs et les parrains -->
    <div class="container">
      <mat-toolbar>
        <mat-icon color="primary" class="mat-24">face</mat-icon>
        <span fxFlex="10px"></span>
        <span class="toolbar-title">Les organisateurs et les parrains</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <p [innerHTML]="footballCamp.details.organizerDescription | safeHtml"></p>
          <div *ngIf="footballCamp.details.organizers != null">
            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutAlign="space-around center" class="quote"
                 *ngFor="let organizer of footballCamp.details.organizers">
              <img class="avatar" src="{{organizer.pathToPicture}}">
              <blockquote>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eget leo nunc, nec tempus mi? Curabitur
                id nisl mi, ut vulputate
                urna. Quisque porta facilisis tortor, vitae bibendum velit fringilla vitae! Lorem ipsum dolor sit amet,
                consectetur
                adipiscing elit.
                <cite>{{organizer.firstname}} {{organizer.lastname}}</cite>
              </blockquote>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Galerie photo -->
    <div class="container">
      <mat-toolbar>
        <mat-icon color="primary" class="mat-24">photo</mat-icon>
        <span fxFlex="10px"></span>
        <span class="toolbar-title">La galerie photo</span>
      </mat-toolbar>
      <span fxFlex="3px" class="background-white"></span>
      <mat-card [ngClass]="isViewerOpened() ? 'z-index11' : 'z-index2'">
        <mat-card-content>
          <gallery [flexBorderSize]="3" [flexImageSize]="7" [metadataUri]="footballCamp.details.pathToGallery"
                   (viewerChange)="onViewerChange($event)">
          </gallery>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- TODO : use sessions instead of footballCamp.sessions  !! -->
    <!-- Les dates et tarifs -->
    <div class="container">
      <mat-toolbar>
        <mat-icon color="primary" class="mat-24">date_range</mat-icon>
        <span fxFlex="10px"></span>
        <span class="toolbar-title">Les dates et tarifs</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <table>
            <thead>
            <tr>
              <th scope="col">Sessions</th>
              <th scope="col">Dates</th>
              <th scope="col" *ngIf="hasFullBoardRatesSessions()">Tarifs en Pension complète</th>
              <th scope="col" *ngIf="hasHalfBoardRatesSessions()">Tarifs en Demi-pension</th>
              <th scope="col">Inscriptions</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let session of footballCamp.details.sessions; let i = index">
              <td data-label="Sessions">Session n°{{i}}</td>
              <td data-label="Dates">A partir du {{session.start | date : 'longDate'}} jusqu'au {{session.end | date :
                'longDate'}}
              </td>
              <td data-label="Tarifs en Pension complète" *ngIf="hasFullBoardRatesSessions()">{{session.fullBoardRates}}
                €
              </td>
              <td data-label="Tarifs en Demi-pension" *ngIf="hasHalfBoardRatesSessions()">{{session.halfBoardRates}} €
              </td>
              <td data-label="Inscriptions">
                <!--<mat-progress-spinner [value]="percentageOfRegistrations(session)"></mat-progress-spinner>-->
                <mat-progress-bar mode="determinate" [value]="percentageOfRegistrations(session)" color="primary"></mat-progress-bar>
                {{numberOfRegistrations}}/{{session.maximumNumberOfRegistrations}}
              </td>
            </tr>
            </tbody>
          </table>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>

    <!-- Les inscriptions -->
    <div class="container">
      <mat-toolbar>
        <mat-icon color="primary" class="mat-24">create</mat-icon>
        <span fxFlex="10px"></span>
        <span class="toolbar-title">Les inscriptions</span>
      </mat-toolbar>
      <mat-card>
        <mat-card-content>
          <div
            *ngIf="footballCamp.details.useOnlineRegistration; then redirectToRegistrationPage; else redirectToWebsite">
          </div>

          <ng-template #redirectToRegistrationPage>
            Ls inscriptions se font sur FootballCamps !
            <br>
            <br>
            <div fxLayout="column" fxLayoutAlign="none center">
              <a [routerLink]="[ '/registration/', footballCamp.id ]" mat-button color="primary" class="link-to-maps">Je
                m'inscris sans attendre !</a>
            </div>
          </ng-template>

          <ng-template #redirectToWebsite>
            Pour le moment les inscriptions sont uniquement possibles via le site de l'organisateur.
            <br>
            <br>
            <div fxLayout="column" fxLayoutAlign="none center">
              <a [href]="footballCamp.details.registrationUrl" mat-button color="primary" class="link-to-maps">Je
                m'inscris sans attendre !</a>
            </div>
          </ng-template>
        </mat-card-content>
      </mat-card>
    </div>

    <span class="separator"></span>
    <span class="separator"></span>
  </div>
</div>
